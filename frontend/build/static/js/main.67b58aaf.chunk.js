(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),o=t(2),i=t(0),u=function(e){var n=e.filterName,t=e.handleFilterNameChange;return Object(i.jsxs)("form",{children:[Object(i.jsx)("h2",{children:"Filter results"}),Object(i.jsx)("label",{htmlFor:"filterName",children:"Name contains: "}),Object(i.jsx)("input",{id:"filterName",value:n,onChange:function(e){return t(e)}})]})},s=function(e){var n=e.newName,t=e.newNumber,c=e.handleNameChange,r=e.handleNumberChange,a=e.addPerson;return Object(i.jsxs)("form",{children:[Object(i.jsx)("h2",{children:"Add a new person"}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"newName",children:"Name: "}),Object(i.jsx)("input",{id:"newName",value:n,onChange:function(e){return c(e)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"newNumber",children:"Number: "}),Object(i.jsx)("input",{id:"newNumber",value:t,onChange:function(e){return r(e)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",onClick:a,children:"add"})})]})},l=function(e){var n=e.persons,t=e.filterName,c=e.deleteHandler;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(i.jsx)(d,{name:e.name,number:e.number,id:e.id,deleteHandler:c},e.id)}))})," "]})},d=function(e){var n=e.name,t=e.number,c=e.id,r=e.deleteHandler;return Object(i.jsxs)("li",{children:[n," ",t," ",Object(i.jsx)("button",{onClick:function(){return r(c,n)},children:"delete"})]})},b=t(4),j=t.n(b),f=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||3001,m="http://localhost:".concat(f,"/api/persons"),h=function(){return j.a.get(m)},O=function(e){return j.a.post(m,e)},p=function(e,n){return j.a.put("".concat(m,"/").concat(e),n)},x=function(e){return j.a.delete("".concat(m,"/").concat(e))},N=(t(38),function(e){var n=e.notification,t=n.message,c=n.status;if(""===t)return null;return Object(i.jsx)("div",{style:{display:"block",fontSize:"1.5rem",boxSizing:"border-box",padding:"0 1rem"},className:c,children:Object(i.jsx)("p",{children:t})})}),v=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),d=Object(a.a)(r,2),b=d[0],j=d[1],f=Object(o.useState)(""),m=Object(a.a)(f,2),v=m[0],g=m[1],w=Object(o.useState)(""),C=Object(a.a)(w,2),S=C[0],y=C[1],E=Object(o.useState)({message:"",status:""}),F=Object(a.a)(E,2),T=F[0],_=F[1];Object(o.useEffect)((function(){h().then((function(e){c(e.data)}))}),[]);var k=function(e){var n=e.id,r=e.name,a=e.number;window.confirm("Do you want to update ".concat(r,"?"))&&p(n,{name:r,number:a}).then((function(e){console.log(e),c(t.map((function(t){return t.id!==n?t:e.data}))),j(""),g(""),H("success","".concat(r," updated successfully"))})).catch((function(e){console.error(e),H("error","Error updating person: ".concat(e))}))},H=function(e,n){_({status:e,message:n}),setTimeout((function(){P()}),3e3)},P=function(){_({status:"",message:""})};return Object(i.jsxs)("main",{role:"main",children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(N,{notification:T}),Object(i.jsx)(u,{filterName:S,handleFilterNameChange:function(e){y(e.target.value)}}),Object(i.jsx)(s,{newName:b,newNumber:v,handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){g(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===b}));n?k({id:n.id,name:b,number:v}):O({name:b,number:v}).then((function(e){c(t.concat(e.data)),j(""),g(""),H("success","".concat(b," added successfully"))})).catch((function(e){console.error(e),H("error","Error adding person: ".concat(e))}))}}),Object(i.jsx)(l,{persons:t,filterName:S,deleteHandler:function(e,n){window.confirm("Are you sure you want to delete ".concat(n,"?"))&&x(e).then((function(r){c(t.filter((function(n){return n.id!==e}))),H("success","".concat(n," deleted successfully"))})).catch((function(e){console.error(e),H("error","Information of ".concat(n," already deleted from the server"))}))}})]})};t(39);r.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.67b58aaf.chunk.js.map